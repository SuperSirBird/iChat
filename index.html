<!DOCTYPE HTML>

<html>
   <head>
      
      <script type = "text/javascript">
	      const WebSocketServer = require("ws").Server;
				const wss = new WebSocketServer({ port: 9998 });

wss.on("connection", (ws) => {
   console.info("websocket connection open");

   if (ws.readyState === ws.OPEN) {
       ws.send(JSON.stringify({
           msg1: 'yo, im msg 1'
       }))

       setTimeout(() => {
            ws.send(JSON.stringify({
                msg2: 'yo, im a delayed msg 2'
            }))
       }, 1000)
   }
});
	      
     // Client
				
			const WebSocket = require('ws');

let ws = new WebSocket('ws://localhost:2222');

ws.onopen = function() {
    console.log('open')
}

ws.onmessage = function(ev) {
    let _data = JSON.parse(ev.data);

    console.log(_data);
}
      </script>
		
   </head>
   
   <body>
      <div id = "sse">
         <a href = "javascript:WebSocketTest()">Run WebSocket</a>
      </div>
      
   </body>
</html>
